"use strict";(self.webpackChunkmy_pra=self.webpackChunkmy_pra||[]).push([[411],{4411:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var r=l(6540),a=l(3532),n=l(6914),o=l(2702),i=l(2941),c=l(5957),s=l(9381),m=l(9029),d=l(5423),p=l(6945),u=l(9298),E=l(8403);const A=()=>{const[e,t]=(0,r.useState)([]),[l,A]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!1),[b,k]=(0,r.useState)(null),{userInfo:x,isLogin:I}=(0,E.i)();(0,r.useEffect)((()=>{I&&w()}),[I]);const w=async()=>{if(x?.userId){A(!0);try{const e=await u.A.get("/resumes"),l=(e.data.data||[]).filter((e=>e.userId?._id===x.userId));console.log(e.data.data),t(l)}catch(e){console.error("获取申请记录失败:",e),a.Ay.error("获取申请记录失败")}finally{A(!1)}}else a.Ay.error("用户信息不完整，无法获取申请记录")},v=e=>e.startsWith("http://")||e.startsWith("https://")?e:e.includes("/api/files/")?e.replace("/api/files/","/api/files/"):e.startsWith("/files/")?`/api${e}`:e.startsWith("/api")?e:`/api${e}`,C=[{title:"申请职位",dataIndex:"jobId",key:"position",render:e=>e?.title||"未知职位"},{title:"申请时间",dataIndex:"submittedAt",key:"applyDate",render:e=>new Date(e).toLocaleDateString()},{title:"状态",dataIndex:"status",key:"status",render:e=>{const{text:t,color:l}={pending:{text:"待处理",color:"blue"},reviewed:{text:"已审核",color:"orange"},hired:{text:"已录用",color:"green"},rejected:{text:"已拒绝",color:"red"}}[e]||{text:e,color:"default"};return r.createElement(n.A,{color:l},t)}},{title:"操作",key:"action",render:(e,t)=>r.createElement(o.A,null,r.createElement(i.Ay,{type:"link",onClick:()=>(k(t),void g(!0))},"预览简历"),r.createElement(i.Ay,{type:"link",onClick:()=>(k(t),void h(!0))},"查看详情"))}];return r.createElement("div",{style:{padding:"24px"}},r.createElement("h2",null,"我的申请记录"),0!==e.length||l?r.createElement(m.A,{spinning:l},r.createElement(d.A,{columns:C,dataSource:e,rowKey:"_id",pagination:{pageSize:10}})):r.createElement(s.A.Text,{type:"secondary"},"您还没有提交过申请"),r.createElement(p.A,{title:"简历预览",open:y,onCancel:()=>g(!1),footer:null,width:800,styles:{body:{height:"80vh"}}},b&&b.fileUrl&&((j=b.fileName)&&j.toLowerCase().endsWith(".pdf")?r.createElement("object",{data:v(b.fileUrl),type:"application/pdf",style:{width:"100%",height:"70vh"}},r.createElement("p",null,"您的浏览器无法直接预览PDF文件。",r.createElement("a",{href:v(b.fileUrl),target:"_blank",rel:"noreferrer"},"点击下载"))):r.createElement("div",{style:{textAlign:"center",padding:"20px"}},r.createElement("p",null,"此文件类型不支持直接预览"),r.createElement(i.Ay,{type:"primary",onClick:()=>window.open(v(b.fileUrl))},"下载文件")))),r.createElement(p.A,{title:"申请详情",open:f,onCancel:()=>h(!1),footer:null,width:700},b&&r.createElement("div",null,r.createElement(c.A,{bordered:!0,column:1,style:{marginBottom:20}},r.createElement(c.A.Item,{label:"申请职位"},b.jobId?.title||"未知职位"),r.createElement(c.A.Item,{label:"申请时间"},new Date(b.submittedAt).toLocaleString()),r.createElement(c.A.Item,{label:"状态"},(()=>{const{text:e,color:t}={pending:{text:"待处理",color:"blue"},reviewed:{text:"已审核",color:"orange"},hired:{text:"已录用",color:"green"},rejected:{text:"已拒绝",color:"red"}}[b.status]||{text:b.status,color:"default"};return r.createElement(n.A,{color:t},e)})()),r.createElement(c.A.Item,{label:"简历文件"},r.createElement(o.A,null,r.createElement(s.A.Text,null,b.fileName),r.createElement(i.Ay,{type:"link",onClick:()=>window.open(v(b.fileUrl))},"下载")))),r.createElement(s.A.Title,{level:5},"教育背景"),(T=b.education)?r.createElement(c.A,{column:1,bordered:!0,size:"small"},r.createElement(c.A.Item,{label:"学校"},T.school||"未填写"),r.createElement(c.A.Item,{label:"专业"},T.major||"未填写"),r.createElement(c.A.Item,{label:"学位"},T.degree||"未填写"),r.createElement(c.A.Item,{label:"毕业年份"},T.graduationYear||"未填写")):"暂无教育信息",r.createElement(s.A.Title,{level:5,style:{marginTop:20}},"工作经验"),(S=b.workExperience)&&0!==S.length?S.map(((e,t)=>r.createElement(c.A,{key:t,column:1,bordered:!0,size:"small",style:{marginBottom:16}},r.createElement(c.A.Item,{label:"公司"},e.company||"未填写"),r.createElement(c.A.Item,{label:"职位"},e.position||"未填写"),r.createElement(c.A.Item,{label:"时间段"},e.duration||"未填写"),r.createElement(c.A.Item,{label:"描述"},e.description||"未填写")))):"暂无工作经验",r.createElement(s.A.Title,{level:5,style:{marginTop:20}},"技能"),b.skills&&b.skills.length>0?r.createElement("div",null,b.skills.map(((e,t)=>r.createElement(n.A,{key:t,style:{margin:"5px"}},e)))):"暂无技能信息")));var S,T,j}}}]);
//# sourceMappingURL=411.bundle.js.map