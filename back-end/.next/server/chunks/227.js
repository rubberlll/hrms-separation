"use strict";exports.id=227,exports.ids=[227],exports.modules={5011:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(1185),s=n.n(r);let a=process.env.MONGODB_URI||"mongodb://localhost:27017/hrm-system";if(!a)throw Error("请在环境变量中定义 MONGODB_URI");let o=global.mongoose;async function connectDB(){if(o.conn)return o.conn;o.promise||(o.promise=s().connect(a,{bufferCommands:!1}));try{return o.conn=await o.promise,o.conn}catch(e){throw o.promise=null,e}}o||(o=global.mongoose={conn:null,promise:null});let i=connectDB},8444:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{Z:()=>m});var s=n(1185),a=n.n(s),o=n(7618),i=e([o]);o=(i.then?(await i)():i)[0];let c=new s.Schema({username:{type:String,required:!0,unique:!0},password:{type:String,required:!0,select:!1},email:{type:String,required:!0,unique:!0,match:/^\S+@\S+\.\S+$/},phone:{type:String},role:{type:String,enum:["admin","hr","employee","user"],required:!0},status:{type:String,enum:["active","inactive","pending"],default:"pending"},department:{type:s.Schema.Types.ObjectId,ref:"Department"},avatar:String,entryDate:Date,employmentType:{type:String,enum:["全职","兼职","实习"]}},{timestamps:!0});c.methods.comparePassword=async function(e){return o.default.compare(e,this.password)},c.pre("save",async function(e){if(!this.isModified("password"))return e();try{let t=await o.default.genSalt(10);this.password=await o.default.hash(this.password,t),e()}catch(t){e(t)}});let p=a().models.User||a().model("User",c),m=p;r()}catch(e){r(e)}})}};