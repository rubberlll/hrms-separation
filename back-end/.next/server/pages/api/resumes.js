"use strict";(()=>{var e={};e.id=410,e.ids=[410],e.modules={9344:e=>{e.exports=require("jsonwebtoken")},1185:e=>{e.exports=require("mongoose")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3424:(e,t,s)=>{s.r(t),s.d(t,{config:()=>p,default:()=>m,routeModule:()=>c});var a={};s.r(a),s.d(a,{default:()=>l});var r=s(1802),u=s(7153),d=s(6249),n=s(5011),o=s(4861),i=s(9529);async function handler(e,t){try{if(await (0,n.Z)(),"GET"===e.method){let s=e.user,a={};"user"===s.role&&(a={userId:s.userId});let r=await o.Z.find(a).populate("userId","username email").populate("jobId","title department").sort({submittedAt:-1});return t.status(200).json({code:200,message:"获取简历列表成功",data:r})}if("POST"===e.method){let{fileUrl:s,fileName:a,education:r,workExperience:u,skills:d,jobId:n}=e.body,i=e.user;if(!s||!a)return t.status(400).json({code:400,message:"请提供必填字段",data:null});let l=await o.Z.create({userId:i.userId,fileUrl:s,fileName:a,education:r,workExperience:u,skills:d,jobId:n,status:"pending",submittedAt:new Date});return t.status(201).json({code:201,message:"简历提交成功",data:l})}return t.status(405).json({code:405,message:"方法不允许",data:null})}catch(e){return console.error(e),t.status(500).json({code:500,message:"服务器错误",data:null})}}let l=(0,i.l)(handler),m=(0,d.l)(a,"default"),p=(0,d.l)(a,"config"),c=new r.PagesAPIRouteModule({definition:{kind:u.x.PAGES_API,page:"/api/resumes",pathname:"/api/resumes",bundlePath:"",filename:""},userland:a})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[222,529,53],()=>__webpack_exec__(3424));module.exports=s})();