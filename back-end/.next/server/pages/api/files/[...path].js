"use strict";(()=>{var e={};e.id=368,e.ids=[368],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},9157:(e,t,a)=>{a.r(t),a.d(t,{config:()=>c,default:()=>u,routeModule:()=>m});var s={};a.r(s),a.d(s,{default:()=>handler});var n=a(1802),o=a(7153),r=a(6249),d=a(7147),i=a.n(d),p=a(1017),l=a.n(p);function handler(e,t){if("GET"!==e.method)return t.status(405).json({code:405,message:"方法不允许",data:null});try{let{path:a}=e.query;if(!Array.isArray(a))return t.status(400).json({code:400,message:"无效的文件路径",data:null});let s=a.map(e=>decodeURIComponent(e)),n=l().join(process.cwd(),"uploads","files",...s);if(!i().existsSync(n))return t.status(404).json({code:404,message:"文件未找到",data:null});let o=i().readFileSync(n);n.toLowerCase().endsWith(".pdf")?t.setHeader("Content-Type","application/pdf"):n.toLowerCase().endsWith(".jpg")||n.toLowerCase().endsWith(".jpeg")?t.setHeader("Content-Type","image/jpeg"):n.toLowerCase().endsWith(".png")?t.setHeader("Content-Type","image/png"):n.toLowerCase().endsWith(".doc")||n.toLowerCase().endsWith(".docx")?t.setHeader("Content-Type","application/msword"):t.setHeader("Content-Type","application/octet-stream");let r=s[s.length-1];t.setHeader("Content-Disposition",`inline; filename*=UTF-8''${encodeURIComponent(r)}`),t.send(o)}catch(e){console.error("文件访问错误:",e),t.status(500).json({code:500,message:"服务器错误",data:null})}}let u=(0,r.l)(s,"default"),c=(0,r.l)(s,"config"),m=new n.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/files/[...path]",pathname:"/api/files/[...path]",bundlePath:"",filename:""},userland:s})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222],()=>__webpack_exec__(9157));module.exports=a})();