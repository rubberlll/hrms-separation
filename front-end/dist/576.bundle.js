"use strict";(self.webpackChunkmy_pra=self.webpackChunkmy_pra||[]).push([[576],{6576:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(6540),l=a(3532),r=a(6945),s=a(2941),o=a(9029),c=a(2702),d=a(9957),i=a(5423),y=a(2877),u=a(9298);const m=()=>{const[e,t]=(0,n.useState)(!0),[a,m]=(0,n.useState)([]),[p,k]=(0,n.useState)(""),A=async()=>{t(!0);try{const e=await u.A.get("/users");console.log("API Response:",e.data),200===e.data.code?m(e.data.data):l.Ay.error(`获取员工信息失败：${e.data.message||"未知错误"}`)}catch(e){console.error("获取员工信息失败:",e),l.Ay.error("获取员工信息失败")}finally{t(!1)}};(0,n.useEffect)((()=>{A()}),[]);const g=[{title:"用户名",dataIndex:"username",key:"username",filteredValue:[p],onFilter:(e,t)=>t.username.toLowerCase().includes(e.toLowerCase())},{title:"邮箱",dataIndex:"email",key:"email"},{title:"电话",dataIndex:"phone",key:"phone"},{title:"部门",dataIndex:"department",key:"department"},{title:"入职日期",dataIndex:"entryDate",key:"entryDate"},{title:"状态",dataIndex:"status",key:"status"},{title:"雇佣类型",dataIndex:"employmentType",key:"employmentType"},{title:"操作",key:"action",render:(e,t)=>n.createElement(s.Ay,{danger:!0,onClick:()=>(async e=>{r.A.confirm({title:"确认解雇",content:"您确定要解雇该员工吗？",okText:"确认",cancelText:"取消",onOk:async()=>{try{const t=await u.A.put(`/users/${e}`,{status:"inactive",role:"user"});200===t.data.code?(l.Ay.success("员工已解雇"),A()):l.Ay.error(`解雇失败：${t.data.message||"未知错误"}`)}catch(e){console.error("解雇员工失败:",e),l.Ay.error("解雇员工失败")}}})})(t.key),disabled:"fired"===t.status},"解雇")}],h=a.filter((e=>"employee"===e.role));return e?n.createElement(o.A,{size:"large"}):a&&0!==a.length?0===h.length?n.createElement("div",null,"未找到普通员工信息"):n.createElement("div",null,n.createElement("h1",null,"员工列表"),n.createElement(c.A,{style:{marginBottom:16}},n.createElement(d.A,{placeholder:"搜索员工姓名",value:p,onChange:e=>k(e.target.value),prefix:n.createElement(y.A,null),style:{width:200}}),n.createElement(s.Ay,{onClick:()=>k("")},"清除搜索")),n.createElement(i.A,{dataSource:h,columns:g,rowKey:"key",pagination:{pageSize:10}})):n.createElement("div",null,"未找到员工信息")},p=()=>n.createElement(m,null)}}]);
//# sourceMappingURL=576.bundle.js.map