"use strict";(self.webpackChunkmy_pra=self.webpackChunkmy_pra||[]).push([[236],{236:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var o=n(6540),a=n(4054),r=n(2702),l=n(2941),i=n(7541),s=n(6942),c=n.n(s),d=n(2533),p=n(9853),m=n(2279),u=n(8073),g=n(8431),y=n(7755),f=n(9449),v=n(9155),b=n(3480),h=n(5381);const x=(0,n(7358).OF)("Popconfirm",(e=>(e=>{const{componentCls:t,iconCls:n,antCls:o,zIndexPopup:a,colorText:r,colorWarning:l,marginXXS:i,marginXS:s,fontSize:c,fontWeightStrong:d,colorTextHeading:p}=e;return{[t]:{zIndex:a,[`&${o}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:l,fontSize:c,lineHeight:1,marginInlineEnd:s},[`${t}-title`]:{fontWeight:d,color:p,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:i,color:r}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:s}}}}})(e)),(e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}}),{resetStyle:!1});const O=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:a,title:r,description:s,cancelText:c,okText:d,okType:p="primary",icon:u=o.createElement(i.A,null),showCancel:h=!0,close:x,onConfirm:O,onCancel:C,onPopupClick:E}=e,{getPrefixCls:A}=o.useContext(m.QO),[w]=(0,v.A)("Popconfirm",b.A.Popconfirm),j=(0,y.b)(r),P=(0,y.b)(s);return o.createElement("div",{className:`${t}-inner-content`,onClick:E},o.createElement("div",{className:`${t}-message`},u&&o.createElement("span",{className:`${t}-message-icon`},u),o.createElement("div",{className:`${t}-message-text`},j&&o.createElement("div",{className:`${t}-title`},j),P&&o.createElement("div",{className:`${t}-description`},P))),o.createElement("div",{className:`${t}-buttons`},h&&o.createElement(l.Ay,Object.assign({onClick:C,size:"small"},a),c||(null==w?void 0:w.cancelText)),o.createElement(g.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,f.DU)(p)),n),actionFn:O,close:x,prefixCls:A("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},d||(null==w?void 0:w.okText))))};const C=o.forwardRef(((e,t)=>{var n,a;const{prefixCls:r,placement:l="top",trigger:s="click",okType:g="primary",icon:y=o.createElement(i.A,null),children:f,overlayClassName:v,onOpenChange:b,onVisibleChange:h,overlayStyle:C,styles:E,classNames:A}=e,w=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:j,className:P,style:$,classNames:S,styles:k}=(0,m.TP)("popconfirm"),[N,z]=(0,d.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(a=e.defaultOpen)&&void 0!==a?a:e.defaultVisible}),I=(e,t)=>{z(e,!0),null==h||h(e),null==b||b(e,t)},B=j("popconfirm",r),T=c()(B,P,v,S.root,null==A?void 0:A.root),W=c()(S.body,null==A?void 0:A.body),[D]=x(B);return D(o.createElement(u.A,Object.assign({},(0,p.A)(w,["title"]),{trigger:s,placement:l,onOpenChange:(t,n)=>{const{disabled:o=!1}=e;o||I(t,n)},open:N,ref:t,classNames:{root:T,body:W},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},k.root),$),C),null==E?void 0:E.root),body:Object.assign(Object.assign({},k.body),null==E?void 0:E.body)},content:o.createElement(O,Object.assign({okType:g,icon:y},e,{prefixCls:B,close:e=>{I(!1,e)},onConfirm:t=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(void 0,t)},onCancel:t=>{var n;I(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)}})),"data-popover-inject":!0}),f))}));C._InternalPanelDoNotUseOrYouWillBeFired=e=>{const{prefixCls:t,placement:n,className:a,style:r}=e,l=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["prefixCls","placement","className","style"]),{getPrefixCls:i}=o.useContext(m.QO),s=i("popconfirm",t),[d]=x(s);return d(o.createElement(h.Ay,{placement:n,className:c()(s,a),style:r,content:o.createElement(O,Object.assign({prefixCls:s},l))}))};const E=C;var A=n(3532),w=n(5423),j=n(6945),P=n(9957),$=n(5739),S=n(261),k=n(3598),N=n(9237),z=n(9298);const I=()=>{const[e,t]=(0,o.useState)([]),[n,i]=(0,o.useState)(!1),[s,c]=(0,o.useState)(!1),[d,p]=(0,o.useState)("新增部门"),[m]=a.A.useForm(),[u,g]=(0,o.useState)(null),y=async()=>{i(!0);try{const e=await z.A.get("/departments");t(e.data.data)}catch(e){console.error("获取部门列表失败:",e)}finally{i(!1)}};(0,o.useEffect)((()=>{y()}),[]);const f=[{title:"部门名称",dataIndex:"name",key:"name"},{title:"部门描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"上级部门",dataIndex:["parentDepartment","name"],key:"parentDepartment",render:(e,t)=>t.parentDepartment?.name||"无"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",render:e=>new Date(e).toLocaleString()},{title:"操作",key:"action",render:(e,t)=>o.createElement(r.A,{size:"middle"},o.createElement(l.Ay,{type:"primary",icon:o.createElement(S.A,null),onClick:()=>v(t)},"编辑"),o.createElement(E,{title:"确定要删除这个部门吗?",onConfirm:()=>b(t._id),okText:"确定",cancelText:"取消"},o.createElement(l.Ay,{type:"primary",danger:!0,icon:o.createElement(k.A,null)},"删除")))}],v=e=>{p("编辑部门"),g(e._id),m.setFieldsValue({name:e.name,description:e.description,parentDepartment:e.parentDepartment?._id}),c(!0)},b=async e=>{try{await z.A.delete(`/departments/${e}`),A.Ay.success("删除部门成功"),y()}catch(e){console.error("删除部门失败:",e)}};return o.createElement("div",null,o.createElement("div",{style:{marginBottom:16}},o.createElement(l.Ay,{type:"primary",icon:o.createElement(N.A,null),onClick:()=>{p("新增部门"),g(null),m.resetFields(),c(!0)}},"新增部门")),o.createElement(w.A,{columns:f,dataSource:e,rowKey:"_id",loading:n,pagination:{pageSize:10}}),o.createElement(j.A,{title:d,open:s,onOk:async()=>{try{const e=await m.validateFields();u?(await z.A.put(`/departments/${u}`,e),A.Ay.success("更新部门成功")):(await z.A.post("/departments",e),A.Ay.success("创建部门成功")),c(!1),y()}catch(e){console.error("提交表单失败:",e)}},onCancel:()=>c(!1),okText:"确定",cancelText:"取消"},o.createElement(a.A,{form:m,layout:"vertical"},o.createElement(a.A.Item,{name:"name",label:"部门名称",rules:[{required:!0,message:"请输入部门名称"}]},o.createElement(P.A,{placeholder:"请输入部门名称"})),o.createElement(a.A.Item,{name:"description",label:"部门描述"},o.createElement(P.A.TextArea,{placeholder:"请输入部门描述",rows:4})),o.createElement(a.A.Item,{name:"parentDepartment",label:"上级部门"},o.createElement($.A,{placeholder:"请选择上级部门",allowClear:!0},e.map((e=>o.createElement($.A.Option,{key:e._id,value:e._id,disabled:u===e._id},e.name))))))))}},261:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(8168),a=n(6540);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var l=n(7064),i=function(e,t){return a.createElement(l.A,(0,o.A)({},e,{ref:t,icon:r}))};const s=a.forwardRef(i)},2563:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(5905),a=n(9077),r=n(5201),l=n(791),i=n(3950),s=n(7358),c=n(4277);const d=e=>{const{componentCls:t,popoverColor:n,titleMinWidth:a,fontWeightStrong:l,innerPadding:i,boxShadowSecondary:s,colorTextHeading:c,borderRadiusLG:d,zIndexPopup:p,titleMarginBottom:m,colorBgElevated:u,popoverBg:g,titleBorderBottom:y,innerContentPadding:f,titlePadding:v}=e;return[{[t]:Object.assign(Object.assign({},(0,o.dF)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:p,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":u,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:g,backgroundClip:"padding-box",borderRadius:d,boxShadow:s,padding:i},[`${t}-title`]:{minWidth:a,marginBottom:m,color:c,fontWeight:l,borderBottom:y,padding:v},[`${t}-inner-content`]:{color:n,padding:f}})},(0,r.Ay)(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},p=e=>{const{componentCls:t}=e;return{[t]:i.s.map((n=>{const o=e[`${n}6`];return{[`&${t}-${n}`]:{"--antd-arrow-background-color":o,[`${t}-inner`]:{backgroundColor:o},[`${t}-arrow`]:{background:"transparent"}}}}))}},m=(0,s.OF)("Popover",(e=>{const{colorBgElevated:t,colorText:n}=e,o=(0,c.oX)(e,{popoverBg:t,popoverColor:n});return[d(o),p(o),(0,a.aB)(o,"zoom-big")]}),(e=>{const{lineWidth:t,controlHeight:n,fontHeight:o,padding:a,wireframe:i,zIndexPopupBase:s,borderRadiusLG:c,marginXS:d,lineType:p,colorSplit:m,paddingSM:u}=e,g=n-o,y=g/2,f=g/2-t,v=a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:s+30},(0,l.n)(e)),(0,r.Ke)({contentRadius:c,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:d,titlePadding:i?`${y}px ${v}px ${f}px`:0,titleBorderBottom:i?`${t}px ${p} ${m}`:"none",innerContentPadding:i?`${u}px ${v}px`:0})}),{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]})},3598:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(8168),a=n(6540);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var l=n(7064),i=function(e,t){return a.createElement(l.A,(0,o.A)({},e,{ref:t,icon:r}))};const s=a.forwardRef(i)},5381:(e,t,n)=>{n.d(t,{Ay:()=>m,hJ:()=>d});var o=n(6540),a=n(6942),r=n.n(a),l=n(427),i=n(7755),s=n(2279),c=n(2563);const d=e=>{let{title:t,content:n,prefixCls:a}=e;return t||n?o.createElement(o.Fragment,null,t&&o.createElement("div",{className:`${a}-title`},t),n&&o.createElement("div",{className:`${a}-inner-content`},n)):null},p=e=>{const{hashId:t,prefixCls:n,className:a,style:s,placement:c="top",title:p,content:m,children:u}=e,g=(0,i.b)(p),y=(0,i.b)(m),f=r()(t,n,`${n}-pure`,`${n}-placement-${c}`,a);return o.createElement("div",{className:f,style:s},o.createElement("div",{className:`${n}-arrow`}),o.createElement(l.z,Object.assign({},e,{className:t,prefixCls:n}),u||o.createElement(d,{prefixCls:n,title:g,content:y})))},m=e=>{const{prefixCls:t,className:n}=e,a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["prefixCls","className"]),{getPrefixCls:l}=o.useContext(s.QO),i=l("popover",t),[d,m,u]=(0,c.A)(i);return d(o.createElement(p,Object.assign({},a,{prefixCls:i,hashId:m,className:r()(n,u)})))}},7755:(e,t,n)=>{n.d(t,{b:()=>o});const o=e=>e?"function"==typeof e?e():e:null},8073:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(6540),a=n(6942),r=n.n(a),l=n(2533),i=n(6928),s=n(7755),c=n(3723),d=n(682),p=n(7977),m=n(5381),u=n(2279),g=n(2563);const y=o.forwardRef(((e,t)=>{var n,a;const{prefixCls:y,title:f,content:v,overlayClassName:b,placement:h="top",trigger:x="hover",children:O,mouseEnterDelay:C=.1,mouseLeaveDelay:E=.1,onOpenChange:A,overlayStyle:w={},styles:j,classNames:P}=e,$=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:S,className:k,style:N,classNames:z,styles:I}=(0,u.TP)("popover"),B=S("popover",y),[T,W,D]=(0,g.A)(B),_=S(),M=r()(b,W,D,k,z.root,null==P?void 0:P.root),F=r()(z.body,null==P?void 0:P.body),[H,R]=(0,l.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(a=e.defaultOpen)&&void 0!==a?a:e.defaultVisible}),V=(e,t)=>{R(e,!0),null==A||A(e,t)},q=(0,s.b)(f),L=(0,s.b)(v);return T(o.createElement(p.A,Object.assign({placement:h,trigger:x,mouseEnterDelay:C,mouseLeaveDelay:E},$,{prefixCls:B,classNames:{root:M,body:F},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},I.root),N),w),null==j?void 0:j.root),body:Object.assign(Object.assign({},I.body),null==j?void 0:j.body)},ref:t,open:H,onOpenChange:e=>{V(e)},overlay:q||L?o.createElement(m.hJ,{prefixCls:B,title:q,content:L}):null,transitionName:(0,c.b)(_,"zoom-big",$.transitionName),"data-popover-inject":!0}),(0,d.Ob)(O,{onKeyDown:e=>{var t,n;o.isValidElement(O)&&(null===(n=null==O?void 0:(t=O.props).onKeyDown)||void 0===n||n.call(t,e)),(e=>{e.keyCode===i.A.ESC&&V(!1,e)})(e)}})))}));y._InternalPanelDoNotUseOrYouWillBeFired=m.Ay;const f=y},9237:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(8168),a=n(6540);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var l=n(7064),i=function(e,t){return a.createElement(l.A,(0,o.A)({},e,{ref:t,icon:r}))};const s=a.forwardRef(i)}}]);
//# sourceMappingURL=236.bundle.js.map